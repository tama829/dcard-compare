<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>dカード比較ツール</title>
<link rel="stylesheet">

<style>
body {
  font-family: "Hiragino Kaku Gothic ProN", sans-serif;
  text-align: center;
}

h1 {
  margin-bottom: 20px;
}

table {
  margin: auto;
  border-collapse: collapse;
  width: 900px;
}

th, td {
  border-bottom: 1px solid #ddd;
  padding: 12px;
  vertical-align: middle;
}

select, input {
  padding: 6px;
  width: 160px;
}

.card-img {
  width: 200px;
  height: auto;
  margin-top: 10px;
}

.sub {
  font-size: 14px;
}

.redline {
  height: 4px;
  background: red;
  border: none;
  width: 900px;
  margin: 20px auto;
}

.result {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  width: 900px;
  margin: auto;
  font-size: 20px;
  font-weight: bold;
}
</style>
</head>
<body>

<h1>dカード比較ツール</h1>

<table class="compare">
  <tr>
    <th>
      <select class="cardType" data-side="left">
        <option value="platinum">dカード PLATINUM</option>
        <option value="gold">dカード GOLD</option>
        <option value="goldu">dカード GOLD U</option>
        <option value="normal">dカード</option>
      </select>
      <img class="card-img" id="img-left" src="platinum.jpg" alt="カード画像">
    </th>
    <th> </th>
    <th>
      <select class="cardType" data-side="right">
        <option value="gold">dカード GOLD</option>
        <option value="platinum">dカード PLATINUM</option>
        <option value="goldu">dカード GOLD U</option>
        <option value="normal">dカード</option>
      </select>
      <img class="card-img" id="img-right" src="gold.jpg" alt="カード画像">
    </th>
  </tr>

  <tr>
    <td><span id="fee-left">0</span>円</td>
    <td>年会費</td>
    <td><span id="fee-right">0</span>円</td>
  </tr>

  <tr>
    <td><input type="number" class="usage" data-side="left" placeholder="月額"></td>
    <td>dカードご利用額（月）</td>
    <td><input type="number" class="usage" data-side="right" placeholder="月額"></td>
  </tr>

  <tr>
    <td>
      <input type="number" class="discount" data-side="left" placeholder="月額">
      <div class="sub">×12 = <span id="discountYear-left">0</span>円</div>
    </td>
    <td>dカード割</td>
    <td>
      <input type="number" class="discount" data-side="right" placeholder="月額">
      <div class="sub">×12 = <span id="discountYear-right">0</span>円</div>
    </td>
  </tr>

  <tr>
    <td>
      <input type="number" class="docomo" data-side="left" placeholder="月額">
      <div class="sub">×12 = <span id="docomoYear-left">0</span>円</div>
    </td>
    <td>ドコモご利用料金</td>
    <td>
      <input type="number" class="docomo" data-side="right" placeholder="月額">
      <div class="sub">×12 = <span id="docomoYear-right">0</span>円</div>
    </td>
  </tr>

  <tr>
    <td><span id="benefit-left">0</span>円</td>
    <td>年間ご利用特典</td>
    <td><span id="benefit-right">0</span>円</td>
  </tr>
</table>

<hr class="redline">

<div class="result">
  <div id="result-left">0円</div>
  <div>実質料金</div>
  <div id="result-right">0円</div>
</div>

<script src="script.js">
const cardData = {
  normal:   { fee: 0,  img: "normal.jpg" },
  goldu:    { fee: 3300,  img: "goldu.jpg" },
  gold:     { fee: 11000, img: "gold.jpg" },
  platinum: { fee: 29700, img: "platinum.jpg" }
};

document.querySelectorAll("input, select").forEach(el => {
  el.addEventListener("input", update);
  el.addEventListener("change", update);
});

update();

function update() {
  ["left", "right"].forEach(side => {
    const type = document.querySelector(`.cardType[data-side="${side}"]`).value;
    const usage = Number(document.querySelector(`.usage[data-side="${side}"]`).value || 0);
    const discount = Number(document.querySelector(`.discount[data-side="${side}"]`).value || 0);
    const docomo = Number(document.querySelector(`.docomo[data-side="${side}"]`).value || 0);

    const fee = cardData[type].fee;
    const rate = cardData[type].rate;

    // 年額計算
    const discountYear = discount * 12;
    const docomoYear = docomo * 12;

    // 年間ご利用特典
    let benefit = 0;
    if (usage >= 200000) {
      benefit = 20000;
    } else if (usage >= 100000) {
      benefit = 10000;
    }

    // 実質料金
    const result = fee - discountYear - docomoYear - benefit;

    // 表示反映
    document.getElementById(`fee-${side}`).textContent = fee.toLocaleString();
    document.getElementById(`discountYear-${side}`).textContent = discountYear.toLocaleString();
    document.getElementById(`docomoYear-${side}`).textContent = Math.round(docomoYear).toLocaleString();
    document.getElementById(`benefit-${side}`).textContent = benefit.toLocaleString();
    document.getElementById(`result-${side}`).textContent = result.toLocaleString() + "円";

    // カード画像切替
    const img = document.getElementById(`img-${side}`);
    img.src = cardData[type].img;
  });
}
</script>
</body>
</html>